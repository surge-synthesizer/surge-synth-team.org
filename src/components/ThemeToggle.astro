<span
    id="theme-toggle"
    class="select-none rounded-lg bg-neutral-50 p-2 text-lg leading-none no-underline hover:cursor-pointer dark:bg-neutral-950"
    >ðŸ”…&#xFE0E;</span
>

<script>
    const toggle = document.getElementById("theme-toggle") as HTMLSpanElement;

    const setTheme = (dark: boolean) => {
        document
            .querySelector('meta[name="color-scheme"]')
            ?.setAttribute("content", dark ? "dark" : "light");

        dark
            ? document.documentElement.classList.add("dark")
            : document.documentElement.classList.remove("dark");

        toggle.innerHTML = dark ? "ðŸ”…&#xFE0E;" : "ðŸ”†&#xFE0E;";

        localStorage.setItem("theme", dark ? "dark" : "light");
    };

    if (localStorage.getItem("theme")) {
        setTheme(localStorage.getItem("theme") === "dark" ? true : false);
    }

    toggle.addEventListener("click", () => {
        setTheme(localStorage.getItem("theme") === "dark" ? false : true);
    });

    const mediaQuery = window.matchMedia("(prefers-color-scheme: dark)");

    mediaQuery.addEventListener("change", () => {
        setTheme(mediaQuery.matches ? true : false);
    });
</script>
