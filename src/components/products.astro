---
import { getCollection } from "astro:content";
import { Image } from "astro:assets";

const pages = await getCollection("pages");
pages.sort((a, b) => {
    return a.data.order - b.data.order;
});
---

<div class="m-auto grid max-w-6xl grid-flow-row grid-cols-1 gap-8 p-4 md:grid-cols-2">
    {
        pages.map((page) =>
            page.data.order !== 0 ? (
                <>
                    <div class="flex flex-col place-content-between gap-6 rounded-3xl bg-backgroundCard p-8">
                        <div class="flex flex-col gap-4">
                            <h2>
                                <a class="no-underline" href={page.data.url}>
                                    {page.data.title}
                                </a>
                            </h2>
                            <a href={page.data.url}>
                                {page.data.cover ? (
                                    <Image
                                        class="rounded-lg bg-transparent shadow-xl shadow-neutral-600 dark:shadow-black"
                                        alt={page.data.title}
                                        src={page.data.cover}
                                    />
                                ) : (
                                    ""
                                )}
                            </a>
                        </div>
                        <p class="text-start">{page.data.summary}</p>
                    </div>
                </>
            ) : (
                ""
            ),
        )
    }
</div>
